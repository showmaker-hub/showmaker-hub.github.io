function u(t){if(!t.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),t.classList.add("active","active-current");let e=t.parentNode;for(;!e.matches(".post-toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode}}function f(){let i=document.querySelectorAll(".post-toc li");if(i.length){let o=[...i].map(e=>{let t=e.querySelector(".toc-link"),c=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo(0,c.offsetTop+1)}),c});!function n(r){r=Math.floor(r+1e4);let t=new IntersectionObserver((e,t)=>{var c=document.documentElement.scrollHeight+100;if(r<c)return t.disconnect(),void n(c);t=function(e){let t=0,c=e[t];if(0<c.boundingClientRect.top)return t=o.indexOf(c.target),0===t?0:t-1;for(;t<e.length;t++){if(!(e[t].boundingClientRect.top<=0))return o.indexOf(c.target);c=e[t]}return o.indexOf(c.target)}(e),u(i[t])},{rootMargin:r+"px 0px -100% 0px",threshold:0});o.forEach(e=>{e&&t.observe(e)})}(document.documentElement.scrollHeight)}}function d(){let n="sidebar-nav-active",t="sidebar-panel-active";{let t=document.querySelector(".sidebar-nav-toc"),c="#icon-list-ordered";t&&t.addEventListener("click",()=>{if(t.classList.contains(n)){let e=t.querySelector("use");e.setAttribute("xlink:href",e.getAttribute("xlink:href")===c?"#icon-list-unordered":c),document.querySelectorAll(".toc-number").forEach(e=>{e.classList.toggle("hidden")})}})}document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.onclick=function(){this.classList.contains(n)||(document.querySelector("."+t).classList.remove(t),document.querySelector("#"+this.dataset.target).classList.add(t),document.querySelector("."+n).classList.remove(n),this.classList.add(n))}}),f()}document.addEventListener("DOMContentLoaded",d),document.addEventListener("pjax:success",d);